<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Reparameterizations · GuidedProposals.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><a class="docs-logo" href="../../"><img src="../../assets/logo.png" alt="GuidedProposals.jl logo"/></a><div class="docs-package-name"><span class="docs-autofit">GuidedProposals.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><a class="tocitem" href="../../get_started/overview/">Get started</a></li><li><input class="collapse-toggle" id="menuitem-3" type="checkbox" checked/><label class="tocitem" for="menuitem-3"><span class="docs-label">User manual</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../guid_prop/">Guided proposals</a></li><li><a class="tocitem" href="../multiple_obs/">Multiple observations</a></li><li><a class="tocitem" href="../log_likelihood/">Log-likelihoods</a></li><li class="is-active"><a class="tocitem" href>Reparameterizations</a><ul class="internal"><li><a class="tocitem" href="#recompute_guiding_term-1"><span>Re-computing the guiding term</span></a></li></ul></li><li><a class="tocitem" href="../bffg/">BFFG algorithm</a></li><li><a class="tocitem" href="../path_functionals/">Computing path functionals</a></li><li><a class="tocitem" href="../ode_type/">(TODO) ODE systems</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-4" type="checkbox"/><label class="tocitem" for="menuitem-4"><span class="docs-label">How to...</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../how_to_guides/sample_bridges/">(TODO) Sample diffusion bridges</a></li><li><a class="tocitem" href="../../how_to_guides/first_passage_time/">(TODO) Sample diffusions in first-passage time setting</a></li><li><a class="tocitem" href="../../how_to_guides/smoothing/">...smooth trajectories</a></li><li><a class="tocitem" href="../../how_to_guides/blocking/">...do blocking</a></li><li><a class="tocitem" href="../../how_to_guides/parameter_inference/">...infer parameters</a></li></ul></li><li><input class="collapse-toggle" id="menuitem-5" type="checkbox"/><label class="tocitem" for="menuitem-5"><span class="docs-label">Tutorials</span><i class="docs-chevron"></i></label><ul class="collapsed"><li><a class="tocitem" href="../../tutorials/in_place_vs_out_of_place/">(TODO) Understanding in-place vs out-of-place</a></li><li><a class="tocitem" href="../../tutorials/smoothing/">Smoothing trajectories of the partially observed FitzHugh–Nagumo diffusion</a></li><li><a class="tocitem" href="../../tutorials/blocking/">Setting up a blocking scheme for a simple smoothing problem</a></li><li><a class="tocitem" href="../../tutorials/parameter_inference/">Parameter inference</a></li></ul></li><li><a class="tocitem" href="../../module_index/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">User manual</a></li><li class="is-active"><a href>Reparameterizations</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Reparameterizations</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaDiffusionBayes/GuidedProposals.jl/blob/master/docs/src/manual/reparameterizations.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Reparameterizations-of-GuidProp-1"><a class="docs-heading-anchor" href="#Reparameterizations-of-GuidProp-1">Reparameterizations of <code>GuidProp</code></a><a class="docs-heading-anchor-permalink" href="#Reparameterizations-of-GuidProp-1" title="Permalink"></a></h1><hr/><p>In an MCMC setting we may wish to change the values of some parameters of <code>GuidProp</code>. <code>GuidProp</code> is defined as an immutable struct; however, the fields containing parameter values are mutable, and thus, changing parameters may be done in-place. Changing them directly by accessing relevant places that store parameter values is not advisable, instead, it is recommended to use one of the relevant convenience functions:</p><article class="docstring"><header><a class="docstring-binding" id="DiffusionDefinition.set_parameters!" href="#DiffusionDefinition.set_parameters!"><code>DiffusionDefinition.set_parameters!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">DD.set_parameters!(
    PP::AbstractArray{&lt;:GuidProp},
    PP°::AbstractArray{&lt;:GuidProp},
    θ°,
    var_p_names,
    var_p_aux_names,
    θ_local_names,
    θ_local_aux_names,
    θ_local_obs_ind,
    critical_change = is_critical_update(
        PP, θ_local_aux_names, θ_local_obs_ind
    ),
)</code></pre><p>Set parameters of Guided proposals <code>PP°</code> in an MCMC setting.</p><p>...</p><p><strong>Arguments</strong></p><ul><li><code>PP</code>: containers indicating how <code>PP°</code> should look like before <code>θ°</code> update</li><li><code>θ°</code>: a vector with new parameters to be potentially set inside <code>PP°</code></li><li><code>var_p_names</code>: list of all variable parameter names in <code>PP</code></li><li><code>var_p_aux_names</code>: list of all variable parameter names of auxiliary laws in</li></ul><p><code>PP</code></p><ul><li><code>θ_local_names</code>: list of pairs with relevant <code>θ°</code> entries for the target law</li></ul><p>in a format (idx-of-param-in-θ°::Int64, param-name-in-law::Symbol)</p><ul><li><code>θ_local_aux_names</code>: list of pairs with relevant <code>θ°</code> entries for the aux law</li></ul><p>in a format (idx-of-param-in-θ°::Int64, param-name-in-law::Symbol)</p><ul><li><code>θ_local_obs_ind</code>: list of pairs with relevant <code>θ°</code> entries for the</li></ul><p>observations in a format (idx-of-param-in-θ°::Int64, idx-in-obs::Int64)</p><ul><li><code>critical_change</code>: boolean for whether <code>θ°</code> update alters any critical</li></ul><p>parameters prompting for recomputation of the guiding term ...</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDiffusionBayes/GuidedProposals.jl/blob/29d3a673d553424ceb77d5c502fcd20c48dcd497/src/reparameterizations.jl#LL1-L34">source</a></section><section><div><pre><code class="language-julia">DD.set_parameters!(
    PP::AbstractArray{&lt;:GuidProp},
    θ°,
    θ_local_names,
    θ_local_aux_names,
    θ_local_obs_ind
)</code></pre><p>Go throught the collection of <code>GuidProp</code>s in <code>PP</code> and set the new parameters <code>θ°</code> in relevant fields. <code>θ_local_names</code> lists which fields in the target law need changing. <code>θ_local_aux_names</code> lists the same for the auxiliary laws and <code>θ_local_obs_ind</code> for the observations.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDiffusionBayes/GuidedProposals.jl/blob/29d3a673d553424ceb77d5c502fcd20c48dcd497/src/reparameterizations.jl#LL141-L154">source</a></section><section><div><pre><code class="language-julia">DD.set_parameters!(
    P::GuidProp,
    θ°,
    θ_local_names,
    θ_local_aux_names,
    θ_local_obs_ind
)</code></pre><p>Set the new parameters <code>θ°</code> in <code>P</code>. <code>θ_local_names</code> lists which fields in the target law need changing. <code>θ_local_aux_names</code> lists the same for the auxiliary law and <code>θ_local_obs_ind</code> for the observation.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDiffusionBayes/GuidedProposals.jl/blob/29d3a673d553424ceb77d5c502fcd20c48dcd497/src/reparameterizations.jl#LL169-L181">source</a></section><section><div><pre><code class="language-julia">DD.set_parameters!(P::GuidProp, θ°::Dict)</code></pre><p>Convenience parameter setter</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDiffusionBayes/GuidedProposals.jl/blob/29d3a673d553424ceb77d5c502fcd20c48dcd497/src/reparameterizations.jl#LL223-L227">source</a></section><section><div><pre><code class="language-julia">DD.set_parameters!(PP::AbstractArray{&lt;:GuidProp}, θ°::Dict)</code></pre><p>Convenience parameter setter</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDiffusionBayes/GuidedProposals.jl/blob/29d3a673d553424ceb77d5c502fcd20c48dcd497/src/reparameterizations.jl#LL234-L238">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GuidedProposals.equalize_obs_params!" href="#GuidedProposals.equalize_obs_params!"><code>GuidedProposals.equalize_obs_params!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">equalize_obs_params!(
    PP::AbstractArray{&lt;:GuidProp},
    PP°::AbstractArray{&lt;:GuidProp}
)</code></pre><p>Go through a collection of <code>GuidProp</code> in PP° and make sure that all observation parameters are the same. If not, equalize them and return a <code>critical_change</code> flag indicating that <code>GuidProp</code> laws need to be recomputed.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDiffusionBayes/GuidedProposals.jl/blob/29d3a673d553424ceb77d5c502fcd20c48dcd497/src/reparameterizations.jl#LL68-L77">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GuidedProposals.equalize_law_params!" href="#GuidedProposals.equalize_law_params!"><code>GuidedProposals.equalize_law_params!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">equalize_law_params!(
    PP::AbstractArray{&lt;:GuidProp},
    PP°::AbstractArray{&lt;:GuidProp},
    var_p_names,
    var_p_aux_names,
)</code></pre><p>Go through two collections of <code>GuidProp</code> and compare their variable parameters. If any of the parameters in <code>PP°</code> ends up being different than in <code>PP</code> then equalize them and if any of them belongs to the auxiliary law then return a <code>critical_change</code> flag.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDiffusionBayes/GuidedProposals.jl/blob/29d3a673d553424ceb77d5c502fcd20c48dcd497/src/reparameterizations.jl#LL109-L121">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="DiffusionDefinition.same_entries" href="#DiffusionDefinition.same_entries"><code>DiffusionDefinition.same_entries</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">DD.same_entries(
    PP::AbstractArray{&lt;:GuidProp},
    PP°::AbstractArray{&lt;:GuidProp},
    entries
)</code></pre><p>Go through the collections of guided proposals <code>PP</code> and <code>PP°</code> and compare if they share the same values of fields listed in <code>entries</code>.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDiffusionBayes/GuidedProposals.jl/blob/29d3a673d553424ceb77d5c502fcd20c48dcd497/src/reparameterizations.jl#LL92-L100">source</a></section></article><article class="docstring"><header><a class="docstring-binding" id="GuidedProposals.is_critical_update" href="#GuidedProposals.is_critical_update"><code>GuidedProposals.is_critical_update</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">is_critical_update(
    PP::AbstractArray{&lt;:GuidProp},
    θ_local_aux_names,
    θ_local_obs_ind
)</code></pre><p>Check if the update of parameters that updates the fields of the auxiliary law listed in <code>θ_local_aux_names</code> and the observations listed in <code>θ_local_obs_ind</code> is critical i.e. whether it prompts for recomputation of the guiding term.</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDiffusionBayes/GuidedProposals.jl/blob/29d3a673d553424ceb77d5c502fcd20c48dcd497/src/reparameterizations.jl#LL195-L205">source</a></section></article><h2 id="recompute_guiding_term-1"><a class="docs-heading-anchor" href="#recompute_guiding_term-1">Re-computing the guiding term</a><a class="docs-heading-anchor-permalink" href="#recompute_guiding_term-1" title="Permalink"></a></h2><hr/><p>Sometimes changing parameter values is all that needs to be done; however, it is not always the case. Often changing parameter values implies that the terms used for computation of the guiding term also need to be updated. This needs to be done whenever any parameter of the auxiliary law or any parameter of an observation has changed.</p><p>To actually re-compute the guiding terms and finalize the reparameterization you need to call</p><article class="docstring"><header><a class="docstring-binding" id="GuidedProposals.recompute_guiding_term!" href="#GuidedProposals.recompute_guiding_term!"><code>GuidedProposals.recompute_guiding_term!</code></a> — <span class="docstring-category">Function</span></header><section><div><pre><code class="language-julia">recompute_guiding_term!(P::GuidProp, next_guided_prop=nothing)</code></pre><p>Recompute the guiding term (most often used after update of parameters or change of an observation). <code>next_guided_prop</code> is the guided proposal law from the subsequent interval</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDiffusionBayes/GuidedProposals.jl/blob/29d3a673d553424ceb77d5c502fcd20c48dcd497/src/guided_proposals.jl#LL353-L359">source</a></section><section><div><pre><code class="language-julia">recompute_guiding_term!(PP::Vector{&lt;:GuidProp})</code></pre><p>Recompute the guiding term for the entire trajectory with all observations (most often used after update of parameters or change of an observation).</p></div><a class="docs-sourcelink" target="_blank" href="https://github.com/JuliaDiffusionBayes/GuidedProposals.jl/blob/29d3a673d553424ceb77d5c502fcd20c48dcd497/src/guided_proposals.jl#LL370-L375">source</a></section></article><p>All changes above are done in-place.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../log_likelihood/">« Log-likelihoods</a><a class="docs-footer-nextpage" href="../bffg/">BFFG algorithm »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Monday 15 June 2020 18:58">Monday 15 June 2020</span>. Using Julia version 1.4.2.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
