<!DOCTYPE html>
<html lang="en"><head><meta charset="UTF-8"/><meta name="viewport" content="width=device-width, initial-scale=1.0"/><title>Guided proposals · GuidedProposals.jl</title><link href="https://fonts.googleapis.com/css?family=Lato|Roboto+Mono" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/fontawesome.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/solid.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/font-awesome/5.11.2/css/brands.min.css" rel="stylesheet" type="text/css"/><link href="https://cdnjs.cloudflare.com/ajax/libs/KaTeX/0.11.1/katex.min.css" rel="stylesheet" type="text/css"/><script>documenterBaseURL="../.."</script><script src="https://cdnjs.cloudflare.com/ajax/libs/require.js/2.3.6/require.min.js" data-main="../../assets/documenter.js"></script><script src="../../siteinfo.js"></script><script src="../../../versions.js"></script><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-dark.css" data-theme-name="documenter-dark"/><link class="docs-theme-link" rel="stylesheet" type="text/css" href="../../assets/themes/documenter-light.css" data-theme-name="documenter-light" data-theme-primary/><script src="../../assets/themeswap.js"></script></head><body><div id="documenter"><nav class="docs-sidebar"><div class="docs-package-name"><span class="docs-autofit">GuidedProposals.jl</span></div><form class="docs-search" action="../../search/"><input class="docs-search-query" id="documenter-search-query" name="q" type="text" placeholder="Search docs"/></form><ul class="docs-menu"><li><a class="tocitem" href="../../">Home</a></li><li><span class="tocitem">Overview</span><ul><li class="is-active"><a class="tocitem" href>Guided proposals</a><ul class="internal"><li><a class="tocitem" href="#Defining-the-four-elements-that-characterize-GuidProp-1"><span>Defining the four elements that characterize <code>GuidProp</code></span></a></li></ul></li><li><a class="tocitem" href="../multiple_obs/">Multiple observations</a></li><li><a class="tocitem" href="../bffg/">BFFG algorithm</a></li><li><a class="tocitem" href="../convenience/">Convenience functions</a></li></ul></li><li><span class="tocitem">Advanced use</span><ul><li><a class="tocitem" href="../../advanced_use/ode_type/">ODE systems</a></li><li><a class="tocitem" href="../../advanced_use/additional_options/">Additional options</a></li></ul></li><li><a class="tocitem" href="../../module_index/">Index</a></li></ul><div class="docs-version-selector field has-addons"><div class="control"><span class="docs-label button is-static is-size-7">Version</span></div><div class="docs-selector control is-expanded"><div class="select is-fullwidth is-size-7"><select id="documenter-version-selector"></select></div></div></div></nav><div class="docs-main"><header class="docs-navbar"><nav class="breadcrumb"><ul class="is-hidden-mobile"><li><a class="is-disabled">Overview</a></li><li class="is-active"><a href>Guided proposals</a></li></ul><ul class="is-hidden-tablet"><li class="is-active"><a href>Guided proposals</a></li></ul></nav><div class="docs-right"><a class="docs-edit-link" href="https://github.com/JuliaDiffusionBayes/GuidedProposals.jl/blob/master/docs/src/overview/guid_prop.md#L" title="Edit on GitHub"><span class="docs-icon fab"></span><span class="docs-label is-hidden-touch">Edit on GitHub</span></a><a class="docs-settings-button fas fa-cog" id="documenter-settings-button" href="#" title="Settings"></a><a class="docs-sidebar-button fa fa-bars is-hidden-desktop" id="documenter-sidebar-button" href="#"></a></div></header><article class="content" id="documenter-page"><h1 id="Defining-guided-proposals-1"><a class="docs-heading-anchor" href="#Defining-guided-proposals-1">Defining guided proposals</a><a class="docs-heading-anchor-permalink" href="#Defining-guided-proposals-1" title="Permalink"></a></h1><p>The main object used to define guided proposals is a struct <code>GuidProp</code>. Its main role is to facilitate sampling of diffusion paths from some <code>target</code> diffusion law by:</p><ul><li>drawing from a <code>proposal</code> diffusion law &amp;</li><li>computing an importance sampling weight</li></ul><p>The two can be used in, say, an importance sampler or mcmc sampler to draw sample-paths from the <code>target</code> law.</p><p>The following information (listed in an abstract form) is required to define this object:</p><ul><li>A <code>target</code> diffusion law</li><li>An <code>auxiliary</code> diffusion law (which is used together with the <code>target</code> law to internally define the <code>proposal</code> law)</li><li>observation of the target process that sampling is conditioned-on</li><li>time-grid on which the path will be sampled on</li></ul><p>Mathematically speaking, guided proposals cannot be defined without the first three elements above; however, the fourth element is superfluous. However, for practical purposes we ask for the time-grid on which the process can be sampled on to be fixed in advance.</p><h2 id="Defining-the-four-elements-that-characterize-GuidProp-1"><a class="docs-heading-anchor" href="#Defining-the-four-elements-that-characterize-GuidProp-1">Defining the four elements that characterize <code>GuidProp</code></a><a class="docs-heading-anchor-permalink" href="#Defining-the-four-elements-that-characterize-GuidProp-1" title="Permalink"></a></h2><p>We first need to define the four elements from the list above. To this end, we should make use of two other packages from the <a href="https://github.com/JuliaDiffusionBayes/">JuliaDiffusionBayes</a> suite: <a href="https://github.com/JuliaDiffusionBayes/DiffusionDefinition.jl">DiffusionDefinition.jl</a> and <a href="https://github.com/JuliaDiffusionBayes/DiffObservScheme.jl">DiffObservScheme.jl</a>. We can use the former package to define the <code>target</code> and <code>auxiliary</code> diffusion. We can either define them using the macro <code>@define_diffusion</code> or if we can, simply load in the pre-defined processes. Let&#39;s do the latter for simplicity:</p><pre><code class="language-julia">using DiffusionDefinition
const DD = DiffusionDefinition
@load_diffusion LotkaVolterra # for constructing the target law
@load_diffusion LotkaVolterraAux # for the auxiliary law

# let&#39;s construct the target law
θ = [2.0/3.0, 4.0/3.0, 1.0, 1.0, 0.2, 0.2]
P_target = LotkaVolterra(θ...)</code></pre><p><strong>IMPORANT</strong> An important note about defining the auxiliary law using <code>@define_diffusion</code> macro. Currently, the following fields from <code>:auxiliary_info</code> must be defined: <code>:t0</code>, <code>:T</code> and <code>:vT</code>. Additionally, the field <code>:xT</code> will be defined automatically and (if need be) auto-initialized (but can also be declared explicitly). These fields are expected by the <code>GuidProp</code> constructor to exist. No other field from <code>:auxiliary_info</code> (apart from explicitly declaring <code>:xT</code>) can be used (i.e. fields <code>:v0</code> and <code>:x0</code>). This last restriction will probably be relaxed in the near future.</p><p>Unlike the target, the auxiliary law need not be initialized. This is because once <code>GuidProp</code> is given an instantiated <code>P_target</code>, an observation <code>obs</code> and a template for constructing the auxiliary law (in the example above, it is given by a definition of a struct <code>LotkaVolterraAux</code>) the constructor has all the necessary information to initialize <code>P_aux</code> itself. In this way we avoid asking the user to duplicate some actions (such as having to initialize <code>P_target</code> and <code>P_aux</code> with the same parameter <code>θ</code>).</p><p>We can now use <a href="https://github.com/JuliaDiffusionBayes/DiffObservScheme.jl">DiffObservScheme.jl</a> to define an observation. Let&#39;s initialize an observation sampled according to a scheme: $ v=X+\eta,\quad \eta\sim N(0,I). $</p><pre><code class="language-julia">using DiffObservScheme, StaticArrays
t, xₜ = 1.0, (@SVector [1.0, 2.0])
obs = LinearGsnObs(t, x_t; Σ = SDiagonal(1.0, 1.0))</code></pre><p>We can now define a time-grid for the interval <span>$[0,t]$</span> on which a guided proposal will be defined:</p><pre><code class="language-julia">dt = 0.01
tt = 0.0:dt:t</code></pre><p>say. We can now define guided proposals that can be used for sampling on the interval <code>[0,t]</code> from the target law <code>LotkaVolterra(θ...)</code> conditioned on <code>obs</code> in an importance sampling setting:</p><pre><code class="language-julia">P = GuidProp(tt, P_target, LotkaVolterraAux, obs)</code></pre><p>At initialization a sequence of computations is performed that derive a <code>guiding term</code> for <code>t</code>&#39;s lying on a pre-specified time-grid <code>tt</code>, as well as some additional quantities need for computations of the <code>log-likelihoods</code>. Therefore <code>P</code> above is ready to be sampled from.</p><p>If at any point the parameters change, then the <code>guiding term</code> might need to be re-computed (in fact, this is the centerpiece of the <code>backward filtering</code> part of the <code>forward filtering-backward guiding</code> algorithm). We provide certain utility functions that facilitate these operations. See ... for more details.</p><h4 id="Note-on-fixing-the-time-grid-1"><a class="docs-heading-anchor" href="#Note-on-fixing-the-time-grid-1">Note on fixing the time-grid</a><a class="docs-heading-anchor-permalink" href="#Note-on-fixing-the-time-grid-1" title="Permalink"></a></h4><p>Conceptually, guided proposals are defined as continuous-time processes, and thus, it should be possible to look-up the value of any sampled trajectory at any time <span>$t\in[0,T]$</span>. Nonetheless, for the purposes that this package was created fixing a time-grid <code>tt</code> at initialization of any <code>GuidProp</code> is helpful in reducing the computational cost of the algorithm. Currently, if sampling on finer grid is needed at any point, then <code>GuidProp</code> object needs to be redefined. This property is not set in stone however, as the computationally intensive routines rely on <code>DifferentialEquations.jl</code> and it is reasonably easy to introduce modifications that could leverage the flexibility provided by <code>DifferentialEquations.jl</code> to allow for refinements of <code>tt</code> post-initialization of <code>GuidProp</code>. Due to lack of use-cases this extension is not on any TODO lists.</p></article><nav class="docs-footer"><a class="docs-footer-prevpage" href="../../">« Home</a><a class="docs-footer-nextpage" href="../multiple_obs/">Multiple observations »</a></nav></div><div class="modal" id="documenter-settings"><div class="modal-background"></div><div class="modal-card"><header class="modal-card-head"><p class="modal-card-title">Settings</p><button class="delete"></button></header><section class="modal-card-body"><p><label class="label">Theme</label><div class="select"><select id="documenter-themepicker"><option value="documenter-light">documenter-light</option><option value="documenter-dark">documenter-dark</option></select></div></p><hr/><p>This document was generated with <a href="https://github.com/JuliaDocs/Documenter.jl">Documenter.jl</a> on <span class="colophon-date" title="Friday 24 April 2020 11:12">Friday 24 April 2020</span>. Using Julia version 1.3.1.</p></section><footer class="modal-card-foot"></footer></div></div></div></body></html>
